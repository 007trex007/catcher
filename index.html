<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
      async function getIPandLocation() {
        try {
          // Get the IP address
          const response = await fetch('https://api.ipify.org?format=json');
          const data = await response.json();
          const ipAddress = data.ip;
      
          // Use the IP address in the ipapi.co URL
          const locationResponse = await fetch(`https://ipapi.co/${ipAddress}/json/`); 
          const locationData = await locationResponse.json();
      
          // Output the data
          console.log('IP-адрес:', ipAddress);
          console.log('Широта:', locationData.latitude);
          console.log('Долгота:', locationData.longitude); 
        } catch (error) {
          console.error('Ошибка получения данных:', error);
        }
      }
      getIPandLocation(); // Call the function
      let tg = window.Telegram.WebApp

      tg.expand()
      tg.setHeaderColor('#fffde6')
      <!-- tg.sendData('test data') -->
      tg.MainButton.setParams({
        text      : 'Сохранить',
        color: '#fffde6',
        is_visible: true
    }).onClick(tg.close())
      tg.MainButton.setParams(text='Сохранить', color='#fffde6')
      tg.MainButton.show()
      tg.MainButton.enable()

      const sendDataToTelegram = () => {
        tg.sendData(selectedRegions);
      }
    
      useEffect(() => {
        tg.onEvent('mainButtonClicked', sendDataToTelegram)
        return () => {
          tg.offEvent('mainButtonClicked', sendDataToTelegram)
        }
      }, [sendDataToTelegram])
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="rectangle-1">
    <div class="the_title">Настройки Catcher</div>
    <p class="switch-container">
    Удалённые сообщения 
    <label class="form-switch">
        <input type="checkbox">
        <i></i>
      </label>
    </p>
    <p class="switch-container">
    Изменённые сообщения
    <label class="form-switch">
      <input type="checkbox">
      <i></i>
    </label>
    </p>
  </div>  
    <script>
      var imgPath = 'back.png';
      document.querySelector('body').style.backgroundImage = 'url(' + imgPath + ')';
    </script>
</body>
</html>